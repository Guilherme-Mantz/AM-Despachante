@page "/recursos/edit/{id:guid}"

@using AMDespachante.Application.Interfaces
@using AMDespachante.Application.ViewModels
@using AMDespachante.UI.Web.Components.Shared.Recursos

@inject NavigationManager NavigationManager
@inject IRecursoAppService RecursoAppService
@inject ISnackbar Snackbar

<RecursoForm Recurso="recurso" OnSubmit="EditarRecurso" />

@code {

    [Parameter]
    public Guid Id { get; set; }

    private RecursoViewModel recurso { get; set; }

    protected override async Task OnParametersSetAsync()
    {
        recurso = await RecursoAppService.GetById(Id);
    }

    private void EditarRecurso(RecursoViewModel recurso)
    {
        RecursoAppService.Update(recurso);
        Snackbar.Add($"Recurso atualizado com sucesso!", Severity.Success, c => c.SnackbarVariant = Variant.Filled);

        NavigationManager.NavigateTo("/recursos");
    }

}
